# iFlow 项目上下文文件 (IFLOW.md)

## 项目概述

这是一个关于**循环准系统(Cyclic Quorum Systems)**的C++项目，专注于寻找最优的循环准系统以解决分布式计算中的互斥问题。项目采用了两种截然不同的方法来解决差分覆盖(Difference Cover)问题：

1. **组合搜索算法**：使用系统化的回溯搜索结合并行线程池
2. **深度强化学习**：使用策略网络进行训练以找到解决方案

项目已成功将已知最优准系统的范围从N=111扩展到N=150，并对N>150的情况使用强化学习找到高质量解。

## 项目结构

- `src/` - 主要源代码目录
  - `diff_cover.cpp` - 组合搜索算法的实现
  - `RL_mt.cpp` - 多线程强化学习算法的实现
  - `ThreadPool.h` - 线程池实现
  - 其他相关算法文件

## 核心算法实现

### 1. 组合搜索算法 (`diff_cover.cpp`)

- 使用递归回溯算法系统性地搜索差分覆盖
- 实现了智能剪枝优化避免无效搜索路径
- 利用线程池进行并行处理以提高效率
- 使用对称性破缺技术（手镯生成）避免重复检查等价解

### 2. 强化学习算法 (`RL_mt.cpp`)

- 使用具有256/128神经元的3层神经网络
- 实现策略梯度方法进行训练
- 支持多线程并行训练（默认10个线程）
- 将差分覆盖问题建模为序列决策问题

## 编译和运行

### 组合搜索:
```bash
# 编译
g++ -std=c++11 -pthread -O3 -o diff_cover src/diff_cover.cpp

# 运行 (N为总数，D为密度)
./diff_cover [N] [D]
```

### 强化学习:
```bash
# 编译
g++ -std=c++11 -pthread -O3 -o rl_cover src/RL_mt.cpp

# 运行
./rl_cover [N] [D]
```

## 项目特点

- **并行处理**：两种方法都利用多线程提高计算效率
- **算法优化**：组合搜索采用剪枝和对称性破缺优化
- **强化学习**：使用策略网络自适应地学习解决方案
- **数学严谨性**：严格遵循差分覆盖的数学定义和约束

## 使用约束

- N ≥ 3（节点总数）
- D ≥ 3（准系统的密度）
- N ≤ D*(D-1)+1（数学约束条件）

## 代码规范

- 遵循C++11标准
- 使用线程安全的数据结构和同步机制
- 包含详细的代码注释解释算法逻辑
- 遵循GNU GPL v2许可证